<!DOCTYPE html>
<html>

<script src='https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.6/Tone.js'></script>
<script src= 'https://cdn.jsdelivr.net/npm/nexusui@latest/dist/NexusUI.js'></script>
<script type="text/javascript" src="https://unpkg.com/@tonejs/ui@0.0.8/build/tonejs-ui.js"></script>
<link rel="stylesheet" href="styleSheet.css">

<body>
<!-- //////////////////////////////////////////////////////////////////////////
// TOGGLE PLAY BUTTON
///////////////////////////////////////////////////////////////////////// -->
  <tone-content>
       <tone-play-toggle></tone-play-toggle>
    </tone-content>

    <script type="text/javascript">
       document.querySelector("tone-play-toggle").addEventListener("play", (e) => {

          const playing = e.detail;

          if (playing){
             Tone.Transport.start();
          } else {
             Tone.Transport.pause();
          }
       });

    </script>

    <!-- //////////////////////////////////////////////////////////////////////////
    // SEQENCER
    ///////////////////////////////////////////////////////////////////////// -->

<div id="seqencer-container">
  <div id="seqencer-row1">
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
  </div>
  <div id="seqencer-row2">
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
  </div>
  <div id="seqencer-row3">
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
  </div>
</div>

<script>

const synths = [
  new Tone.Synth(), //row 0
  new Tone.Synth(), //row 1
  new Tone.Synth()  //row 2
];

synths.forEach(synth => synth.toDestination());

const rows = document.body.querySelectorAll('div > div');
      notes = ['G5', 'E4', 'C3'];
let index = 0;

Tone.Transport.scheduleRepeat(repeat, '8n');

Tone.Transport.start();

function repeat(time){
  let step = index % 8;
  for (let i = 0; i < rows.length; i++) {
    let synth = synths[i],
      note = notes[i],
      row = rows[i],
      input = row.querySelector(`input:nth-child(${step + 1})`);
    if (input.checked) synth.triggerAttackRelease(note, '8n', time);


  }
    index++;
}


<!-- //////////////////////////////////////////////////////////////////////////
// GLOBAL CONTROLS
///////////////////////////////////////////////////////////////////////// -->

Tone.Transport.bpm.value = 130;






</script>

</body>
</html>
